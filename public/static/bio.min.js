function sendRequest(t,e,i,o,r="POST"){$.ajax({type:r,url:t,data:e,contentType:!1,processData:!1,dataType:"json",beforeSend:()=>$("#loading").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>'),complete:()=>$("#loading span").remove(),success:function(t){$("input[name=_token]").val(t.token),$.notify({message:t.message},{type:t.error?"danger":"success",placement:{from:"top",align:"right"}}),t.html&&$("body").append(t.html),i&&i(t)},error:o})}function refreshPreview(){$cardPreview.prepend('<div class="frameloading d-flex align-items-center justify-content-center" style="position: absolute;top: 0;left: 0;height: 100%;width: 100%;background: rgba(0,0,0,0.4);z-index: 999;"><span class="spinner-border spinner-border-xl text-light" role="status" aria-hidden="true" style="width: 3rem; height: 3rem;"></span></div>'),setTimeout(()=>$cardPreview.find(".frameloading").remove(),2e3),$iframePreview.attr("src",iframesrc+"?token="+Date.now())}function setColor(t,e,i){$("input[name=themeid]").val(""),i.val(e.toHexString())}function customTheme(t,e,i,o){$("input[name=themeid]").val(""),$("input[name=theme]").val(t),$("input[name=mode]").val("custom"),$("#buttontextcolor").val(i),$("#buttontextcolor").spectrum({color:i,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .btn-custom",t,$(this))},hide:function(t){setColor("#preview .btn-custom",t,$(this))}}),$("#buttoncolor").val(e),$("#buttoncolor").spectrum({color:e,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .btn-custom",t,$(this))},hide:function(t){setColor("#preview .btn-custom",t,$(this))}}),$("#textcolor").val(o),$("#textcolor").spectrum({color:o,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview, #preview h3 > span, #preview p",t,$(this))},hide:function(t){setColor("#preview, #preview h3 > span  #preview p",t,$(this))}})}function changeTheme(t,e,i,o,r,s,a="single",n="rectangle",l="-45",c=!1,d="#000",h=!1){$("input[name=themeid]").val(""),h&&$("input[name=themeid]").val(h),"gradient"==a?($(".bgtype").removeClass("show"),$("#gradient").addClass("show"),$("[data-trigger=bgtype]").removeClass("border-secondary"),$("#forgradient").addClass("border-secondary"),$("input[name=theme]").val(""),$("input[name=mode]").val("gradient"),$("#bgst").val(e),$("#bgst").spectrum({color:e,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .card",t,$(this))},hide:function(t){setColor("#preview .card",t,$(this))}}),$("#bgsp").val(i),$("#bgsp").spectrum({color:i,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .card",t,$(this))},hide:function(t){setColor("#preview .card",t,$(this))}})):"image"==a?($(".bgtype").removeClass("show"),$("#image").addClass("show"),$("[data-trigger=bgtype]").removeClass("border-secondary"),$("#forimage").addClass("border-secondary"),$("input[name=theme]").val(""),$("input[name=mode]").val("image")):($(".bgtype").removeClass("show"),$("#singlecolor").addClass("show"),$("[data-trigger=bgtype]").removeClass("border-secondary"),$("#forsinglecolor").addClass("border-secondary"),$("input[name=theme]").val(""),$("input[name=mode]").val("singlecolor")),$("#bg").val(t),$("#bg").spectrum({color:t,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .card",t,$(this))},hide:function(t){setColor("#preview .card",t,$(this))}}),$("#buttontextcolor").val(r),$("#buttontextcolor").spectrum({color:r,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .btn-custom",t,$(this))},hide:function(t){setColor("#preview .btn-custom",t,$(this))}}),$("#buttoncolor").val(o),$("#buttoncolor").spectrum({color:o,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview .btn-custom",t,$(this))},hide:function(t){setColor("#preview .btn-custom",t,$(this))}}),$("#textcolor").val(s),$("#textcolor").spectrum({color:s,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview, #preview h3 > span, #preview p",t,$(this))},hide:function(t){setColor("#preview, #preview h3 > span  #preview p",t,$(this))}}),c&&$("#shadow").val(c),n&&$("#buttonstyle").val(n),d&&($("#shadowcolor").val(d),$("#shadowcolor").spectrum({color:d,showInput:!0,preferredFormat:"hex",move:function(t){setColor("#preview, #preview h3 > span, #preview p",t,$(this))},hide:function(t){setColor("#preview, #preview h3 > span  #preview p",t,$(this))}}))}function bioupdate(){Object.entries(biodata).forEach(([t,e])=>{const i=window["fn"+e.type];"function"==typeof i&&i($("[data-type="+e.type+"]"),e,t)})}function slug(t){return t.toLowerCase().replace(/[àáäâèéëêìíïîòóöôùúüûñç]/g,t=>"aaaaeeeeiiiioooouuuunc"["àáäâèéëêìíïîòóöôùúüûñç".indexOf(t)]).replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function isEmoji(t){return/\p{Emoji}/u.test(t)&&!/fa-/.test(t)}!function(t,e,i,o){function r(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),o=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+o}function s(e,i,o,r){var s=e.length,a=r?"offset":"position";for(o=o||0;s--;){var n=e[s].el?e[s].el:t(e[s]),l=n[a]();l.left+=parseInt(n.css("margin-left"),10),l.top+=parseInt(n.css("margin-top"),10),i[s]=[l.left-o,l.left+n.outerWidth()+o,l.top-o,l.top+n.outerHeight()+o]}}function a(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function n(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var o,s=t.length,a=[];s--;)o=t[s],a[s]=[s,r(o,e),i&&r(o,i)];return a=a.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]}),a}function l(e){this.options=t.extend({},h,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=o))}function c(e,i){this.el=e,this.options=t.extend({},d,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var o=this.rootGroup.options.itemPath;this.target=o?this.el.find(o):this.el,this.target.on(m.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var d={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},h={afterMove:function(t,e,i){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(t,e){return!0},onCancel:function(t,e,i,o){},onDrag:function(t,e,i,o){t.css(e)},onDragStart:function(e,i,o,r){e.css({height:e.outerHeight(),width:e.outerWidth()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i,o,r){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i))return i.preventDefault(),!0},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:!0,serialize:function(e,i,o){var r=t.extend({},e.data());return o?[i]:(i[0]&&(r.children=i),delete r.subContainers,delete r.sortable,r)},tolerance:0},p={},u=0,f={left:0,top:0,bottom:0,right:0},m={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},g="subContainers";l.get=function(t){return p[t.group]||(t.group===o&&(t.group=u++),p[t.group]=new l(t)),p[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument);var o=t(e.target).closest(this.options.itemSelector);if(o.length){if(this.item=o,this.itemContainer=i,this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,h.onMousedown,e))return;this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0}},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,h.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,a(this.pointer,this.item.offsetParent()),h.onDrag,t);var e=this.getPointer(t),i=this.sameResultBox,r=this.options.tolerance;(!i||i.top-r>e.top||i.bottom+r<e.top||i.left-r>e.left||i.right+r<e.left)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=o))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,h.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),h.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=o,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=n(this.getContainerDimensions(),t,e),r=i.length;r--;){var s=i[r][0],l=i[r][1];if(!l||this.options.pullPlaceholder){var c=this.containers[s];if(!c.disabled){if(!this.$getOffsetParent()){var d=c.getItemOffsetParent();t=a(t,d),e=a(e,d)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=o)},movePlaceholder:function(t,e,i,o){var r=this.lastAppendedItem;!o&&r&&r[0]===e[0]||(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=o,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||s(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===o){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=a(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){var e=t.originalEvent||t.originalEvent.touches&&t.originalEvent.touches[0];return{left:t.pageX||e.pageX,top:t.pageY||e.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(t){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,o=["drag","drop","scroll"];t.each(o,function(t,o){i.$document[e](m[o],i[o+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=o},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=o},_destroy:function(){p[this.options.group]=o}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=n(this.getItemDimensions(),t,e),o=i.length,r=this.rootGroup,s=!r.options.isValidTarget||r.options.isValidTarget(r.item,this);if(!o&&s)return r.movePlaceholder(this,this.target,"append"),!0;for(;o--;){var a=i[o][0],l=i[o][1];if(!l&&this.hasChildGroup(a)){var c=this.getContainerGroup(a).searchValidTarget(t,e);if(c)return!0}else if(s)return this.movePlaceholder(a,t),!0}},movePlaceholder:function(e,i){var o=t(this.items[e]),r=this.itemDimensions[e],s="after",a=o.outerWidth(),n=o.outerHeight(),l=o.offset(),c={left:l.left,right:l.left+a,top:l.top,bottom:l.top+n};if(this.options.vertical){var d=(r[2]+r[3])/2,h=i.top<=d;h?(s="before",c.bottom-=n/2):c.top+=n/2}else{var p=(r[0]+r[1])/2,u=i.left<=p;u?(s="before",c.right-=a/2):c.left+=a/2}this.hasChildGroup(e)&&(c=f),this.rootGroup.movePlaceholder(this,o,s,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),s(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent(),t},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var r=t.data(this.items[e],g);if(r===o){var s=this.$getChildren(this.items[e],"container");if(r=!1,s[0]){var a=t.extend({},this.options,{rootGroup:this.rootGroup,group:u++});r=s[i](a).data(i).group}t.data(this.items[e],g,r)}return r},$getChildren:function(e,i){var o=this.rootGroup.options,r=o[i+"Path"],s=o[i+"Selector"];return e=t(e),r&&(e=e.find(r)),e.children(s)},_serialize:function(e,i){var o=this,r=i?"item":"container",s=this.$getChildren(e,r).not(this.options.exclude).map(function(){return o._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,s,i)},traverse:function(e){t.each(this.items||[],function(i){var o=t.data(this,g);o&&o.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=o},_destroy:function(){var e=this;this.target.off(m.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,g)})}};var v={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,v),t.fn[i]=function(e){var r=Array.prototype.slice.call(arguments,1);return this.map(function(){var s=t(this),a=s.data(i);return a&&v[e]?v[e].apply(a,r)||this:(a||e!==o&&"object"!=typeof e||s.data(i,new c(s,e)),this)})}}(jQuery,window,"sortable");const $document=$(document),$cardPreview=$(".card-preview"),$iframePreview=$cardPreview.find("iframe"),iframesrc=$iframePreview.attr("src");$(document).ready(function(){$(document).on("change","[data-autosave] input,[data-autosave] textarea,[data-autosave] select",function(){let t=$(this).parents("form");sendRequest(t.attr("action"),new FormData(t[0]),function(){refreshPreview()})}),$(document).on("change","[data-enable]",function(t){t.preventDefault();let e=$(this).data("enable");sendRequest($("[data-action]").data("action")+"/toggle/"+e,null,function(){refreshPreview()})}),$(document).on("submit","[data-trigger=saveblock]",function(t){t.preventDefault();let e=$(this),i=$("[data-action]").data("action"),o=$(this).data("id"),r=e.find("button[type=submit]").text();e.find("button[type=submit]").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>').attr("disabled","disabled"),sendRequest(i+"/"+o,new FormData(e[0]),function(){refreshPreview(),e.find("button[type=submit]").text(r).removeAttr("disabled")})});var t=[];$("[data-trigger=addsocial]").click(function(e){e.preventDefault();let i=$(this).parents("form"),o=$(this).parents(".card").find("select[name=platform]").val(),r=$(this).parents(".card").find("input[name=socialink]").val(),s=/(mailto:[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$)|(((?:https?)|(?:ftp)):\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/;if(r.length<5||!s.test(r))return $.notify({message:$(this).data("error")},{type:"danger",placement:{from:"top",align:"right"}}),!1;if(t.includes(o))return $.notify({message:$(this).data("error-alt")},{type:"danger",placement:{from:"top",align:"right"}}),!1;t.push(o);let a=decodeURIComponent($(this).parents(".card").find("select[name=platform]").find(":selected").data("icon").replace(/\+/g," ")),n='<div class="border rounded p-2 mb-3 socialsortable"><div class="mb-3 d-flex align-items-center"><i class="fs-4 fa fa-align-justify handle ms-1" data-bs-toggle="tooltip"></i><span class="ms-2 fw-bold">'+$(this).parents(".card").find("select[name=platform]").find(":selected").text()+'</span><div class="ms-auto d-flex align-items-center"><a class="ms-auto fs-6 pe-2" data-trigger="deletesocial" href=""><i class="fa fa-times text-dark fs-4" data-bs-toggle="tooltip"></i></a></div></div><div class="input-group"><div class="input-group-text bg-white">'+a+'</div><input type="text" class="form-control p-2" name="social['+o+']" placeholder="https://" value="'+r+'"></div></div>';$("#sociallinksholder").removeClass("d-none").append(n),sendRequest(i.attr("action"),new FormData(i[0]),function(){refreshPreview()})}),$(document).on("click","[data-trigger=deletesocial]",function(t){t.preventDefault();let e=$(this),i=$(this).parents("form");return $(this).parents(".socialsortable").slideUp("slow",function(){$(this).find("input[type=text]").val(""),e.parents(".socialsortable").remove(),sendRequest(i.attr("action"),new FormData(i[0]),function(){refreshPreview()})}),!1}),$("#sociallinksholder").sortable({containerSelector:"#sociallinksholder",handle:".handle",itemSelector:".socialsortable",placeholder:'<div class="card p-4 bg-secondary shadow-none border"></div>',onMousedown:function(t,e,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i))return i.preventDefault(),!0},onDrop:function(t,e,i,o){t.removeClass(e.group.options.draggedClass).removeAttr("style"),$("body").removeClass(e.group.options.bodyClass);let r=t.parents("form");sendRequest(r.attr("action"),new FormData(r[0]),function(){refreshPreview()})}}),$("[data-trigger=bgtype]").click(function(){$("[data-trigger=bgtype]").removeClass("border-secondary");let t=$(this).attr("href").replace("#","");$("input[name=mode]").val(t),$("input[name=theme]").val(""),$("#singlecolor,#gradient,#image").removeAttr("style"),$(this).addClass("border-secondary");let e=$(this).parents("form");sendRequest(e.attr("action"),new FormData(e[0]),function(){refreshPreview()})}),$("#linkcontent").sortable({containerSelector:"#linkcontent",handle:".handle",itemSelector:".sortable",placeholder:'<div class="card p-4 bg-secondary shadow-none border"></div>',onMousedown:function(t,e,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i))return i.preventDefault(),!0},onDrop:function(t,e,i,o){t.removeClass(e.group.options.draggedClass).removeAttr("style"),$("body").removeClass(e.group.options.bodyClass);let r=[];$(".widget").each(function(){r.push($(this).data("id"))}),sendRequest($("[data-action]").data("action")+"/order",JSON.stringify(r),function(){refreshPreview()})}}),$("[data-trigger=switcher]").click(function(t){if(t.preventDefault(),$(this).hasClass("active"))return!1;$(".switcher").fadeOut("fast"),$($(this).attr("href")).show(),$(this).parents(".nav").find("a").removeClass("active"),$(this).addClass("active")}),$("[data-trigger=bgtype]").click(function(){if($(this).hasClass("active"))return!1;$(".bgtype").fadeOut("fast").removeClass("show"),$($(this).attr("href")).addClass("show"),$("[data-trigger=bgtype]").removeClass("active"),$(this).addClass("active")}),$("[data-trigger=choosefont]").on("click",function(){$("[data-trigger=choosefont]").removeClass("border-secondary"),$(this).addClass("border-secondary")}),$("[data-trigger=chooselayout]").on("click",function(){$("[data-trigger=chooselayout]").removeClass("border-secondary"),$(this).addClass("border-secondary"),"layout2"==$(this).data("value")||"layout3"==$(this).data("value")?$("#layoutbanner").addClass("show"):$("#layoutbanner").removeClass("show")}),$("[data-trigger=insertcontent]").click(function(t){t.preventDefault();let e="fn"+$(this).data("type");if($(".alt-error").remove(),void 0!==e&&void 0!==window[e]){let t=window[e]($(this));if(!1===t)return;$("#contentModal div").removeClass("show"),$("#options").addClass("show"),$("#contentModal .btn-close").click(),$("[data-toggle=select]").select2(),$(".widget input[data-binary=true]").each(function(){$(this).before('<input type="hidden" value="0" name="'+$(this).attr("name")+'">')})}}),$(document).on("click","[data-trigger=removeCard]",function(t){t.preventDefault();let e=$(this).parents(".widget").data("id");$("a[data-trigger=confirmremove]").data("id",e)}),$(document).on("click","[data-trigger=confirmremove]",function(t){t.preventDefault();let e=$(this),i=$(this).data("id"),o=$("[data-action]").data("action"),r=$(this).text();e.html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>').attr("disabled","disabled"),sendRequest(o+"/"+i+"/delete",null,function(){refreshPreview(),e.text(r).removeAttr("disabled"),$("[data-id="+i+"]").remove(),$("#preview").find("#"+i).parent(".item").remove(),$("#removecard .btn-close").click()},null,"GET")}),$("#avatar").change(function(){let t=$(this).prop("files"),e=t[0];(!["image/jpeg","image/jpg","image/png"].includes(e.type)||e.size>512e3)&&$.notify({message:$("#avatar").data("error")},{type:"danger",placement:{from:"top",align:"right"}});var i=new FileReader;i.onload=function(t){$("#useravatar").attr("src",t.target.result)},i.readAsDataURL(e)}),$("[data-trigger=uploadavatar]").click(function(t){t.preventDefault(),$("#avatar").click()}),$("#bgimage").change(function(){let t=$(this).prop("files"),e=t[0];(!["image/jpeg","image/jpg","image/png"].includes(e.type)||e.size>1048576)&&$.notify({message:$("#bgimage").data("error")},{type:"danger",placement:{from:"top",align:"right"}})}),$("[data-trigger=color]").each(function(){var t="#000000";$(this).data("default")&&(t=$(this).data("default")),$(this).spectrum({color:t,showInput:!0,preferredFormat:"hex"})}),$("[data-trigger=changetheme]").click(function(t){t.preventDefault();let e=$(this).parents("form");sendRequest(e.attr("action"),new FormData(e[0]),function(){refreshPreview()})}),$("[data-trigger=livesearch]").keyup(function(){let t=$(this).val();if(t.length<3)return $("#biowidgets .item").removeClass("d-none");$("#biowidgets .item").each(function(){$(this).text().toLowerCase().includes(t.toLowerCase())?$(this).removeClass("d-none"):$(this).addClass("d-none")})}),$("[data-toggle=biodatepicker]").each(function(){let t=$(this);t.daterangepicker({minDate:moment(),singleDatePicker:!0,showDropdowns:!0,autoApply:!0,autoUpdateInput:!1,timePicker:!0,locale:{format:"YYYY-MM-DD HH:mm"}},function(e){t.val(e.format("YYYY-MM-DD HH:mm"))})}),$(document).on("click","[data-trigger=icontype]",function(t){t.preventDefault();let e=$(this).data("value"),i=$(this).attr("href");$(this).parents(".icon-parent").find(".form-group").addClass("collapse"),$(this).parents(".icon-selector").find("input.iconmode").val(e),"#"!==i&&$(this).parents(".icon-parent").find(i).removeClass("collapse")}),$(document).on("click",".widget [data-bs-toggle=collapse]",function(){$(this).hasClass("collapsed")?$(this).find("h5 > i").removeClass("fa-chevron-up").addClass("fa-chevron-down"):$(this).find("h5 > i").removeClass("fa-chevron-down").addClass("fa-chevron-up")})});